<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O GIT deseja um Feliz Natal üéÅüéÑüéÖ</title>
    <style>
        /* Christmas palette:
           pine green:   #0b3d2e
           festive red:  #b71c1c
           deep red alt: #8b0000
           warm gold:    #ffd54a
           cream bg:     #fff8f0
           light green:  #eaf6ee
           light red:    #fff4f4
        */
        :root{
            --pine-green: #0b3d2e;
            --festive-red: #b71c1c;
            --deep-red: #8b0000;
            --warm-gold: #ffd54a;
            --cream-bg: #fff8f0;
            --light-green: #eaf6ee;
            --light-red: #fff4f4;
            --card-bg: #ffffff;
            --muted-text: #4b4b4b;
        }

        body {
            font-family: "Avenir", "Avenir Next", "Helvetica Neue", Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            
            background: linear-gradient(rgba(255, 248, 240, 0.02), rgba(255,248,240,0.15)),
                        url('https://images.squarespace-cdn.com/content/v1/5942fb7ee3df28eb9babbc38/1731539450654-EIYJL32FE223TMNQMFKM/still-life-christmas-decoration-with-copy-space.jpg?format=2500w')
                        center/cover no-repeat fixed;
            color: var(--muted-text);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        /* snowfall/video overlay: use a background video element for moving snow */
        .background-video {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* crop to fill while preserving aspect */
            object-position: center top;
            pointer-events: none;
            opacity: 0.85;
            z-index: 0;
        }
        .email-container {
            max-width: 600px;
            width: 100%;
            margin: 0; /* removed vertical margin since body centers it */
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 6px 25px rgba(11,61,46,0.12);
            /* add a bit of responsive breathing room on small screens */
            margin-left: 16px;
            margin-right: 16px;
            position: relative;
            z-index: 1; /* ensure content sits above snowfall overlay */
        }
        .header {
            background-color: var(--cream-bg);
            color: var(--pine-green);
            padding: 20px;
            text-align: center;
        }
        .banner-container {
            position: relative;
            width: 100%;
            aspect-ratio: 4 / 3; /* prefer 4:3 ratio */
            min-height: 360px; /* make the banner bigger by default */
            max-height: 720px; /* prevent it from becoming excessively tall on large screens */
            overflow: hidden;
            transition: opacity 420ms ease, transform 420ms ease;
            will-change: opacity, transform;
        }
        .banner {
            position: relative;
            width: 100%;
            height: 100%; /* fill the .banner-container height */
            color: var(--warm-gold);
            text-align: center;
        }

        .banner-img {
            width: 100%;
            height: 100%; /* fill the banner box */
            display: block;
            object-fit: cover; /* crop to fill while preserving aspect */
            object-position: center center; /* keep image centered */
            transition: opacity 420ms ease; /* allow crossfade when swapping src */
            will-change: opacity;
        }

        .banner-content {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-end; /* place content at bottom */
            align-items: center;
            color: var(--warm-gold);
            text-align: center;
            padding: 1rem;
            padding-bottom: 1.15rem; /* extra spacing from the bottom edge */
            pointer-events: none;
            z-index: 2; /* ensure content sits above the image */
        }

        /* fade-out helper used before removing the banner from the DOM */
        .banner-container.fade-out {
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
        }

        .banner-content > * {
            pointer-events: auto;
        }
        .banner h1 {
            font-size: 2.5rem;
            margin: 0;
            color: var(--warm-gold);
            text-shadow: 3px 3px 8px rgba(0,0,0,0.7);
        }
        .banner p {
            font-size: 1.2rem;
            margin: 10px 0 20px;
            color: #fff5d6;
        }
        .click-here {
            background-color: var(--festive-red);
            color: var(--cream-bg);
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 0.95rem;
            cursor: pointer;
            transition: transform 0.18s ease, box-shadow 0.18s ease, opacity 0.18s ease;
            border: 2px solid rgba(255,213,74,0.18);
            box-shadow: 0 6px 18px rgba(183, 28, 28, 0.11)
        }

        .click-here {
            margin-bottom: 7px; /* ensure a small gap from the bottom */
        }
        .click-here:hover {
            background-color: var(--deep-red);
            transform: translateY(-2px) scale(1.02)
        }
        .interactive-section {
            position: relative; /* ensure absolutely positioned children anchor to this box */
            padding: 30px;
            text-align: center;
            display: none;
            width: 100%;
            height: auto; /* flexible height so content reflows to viewport */
            min-height: 220px; /* small baseline so it doesn't collapse */
            box-sizing: border-box;
            /* use explicit properties to avoid background-attachment: fixed quirks inside containers */
            background-image: linear-gradient(rgba(255, 248, 240, 0.733), rgba(255,248,240,0.15)), url('https://ik.imagekit.io/eydsmhc4x/natal/C%C3%B3pia%20de%20E%20um%20pr%C3%B3spero%20Ano%20Novo.png');
            background-position: center center;
            background-size: cover;
            background-repeat: no-repeat; /* ensure it doesn't tile */
            border-radius: 8px;
            overflow: hidden;
        }
        .question {
            font-size: 1.5rem;
            color: var(--festive-red);
            margin-bottom: 25px;
            font-weight: bold;
        }
        .options {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 30px;
        }

        /* make option buttons match the click-here button's shape and weight */
        .option-btn {
            padding: 12px 25px; /* match click-here */
            font-size: 0.95rem;
            border: none;
            border-radius: 30px; /* pill shape like click-here */
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.18s ease, box-shadow 0.18s ease, opacity 0.18s ease;
            box-shadow: 0 6px 18px rgba(11,61,46,0.06);
            min-width: 160px; /* give similar visual width */
            display: inline-block;
            text-align: center;
        }

        .yes-btn {
            /* semi-transparent gradient so the page bg subtly shows through */
            background: linear-gradient(180deg, rgba(11,61,46,0.92), rgba(15,79,61,0.92));
            color: rgba(255,248,240,0.95); /* was var(--cream-bg) */
            border: 2px solid rgba(255,213,74,0.06);
            box-shadow: 0 6px 18px rgba(15,79,61,0.12);
        }
        .yes-btn:hover {
            filter: brightness(1.05);
            transform: translateY(-2px) scale(1.02);
        }

        .no-btn {
            /* semi-transparent red gradient */
            background: linear-gradient(180deg, rgba(183,28,28,0.92), rgba(139,0,0,0.92));
            color: rgba(255,248,240,0.95);
            border: 2px solid rgba(255,213,74,0.08);
            box-shadow: 0 6px 18px rgba(183,28,28,0.12);
        }
        .no-btn:hover {
            filter: brightness(1.03);
            transform: translateY(-2px) scale(1.02);
        }
        .message {
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        .fact-message {
            /* slightly transparent so background image shows through */
            background-color: rgba(234,246,238,0.50); /* was var(--light-green) */
            color: var(--pine-green);
            display: flex;
            gap: 18px;
            align-items: flex-start;
            padding: 16px;
        }

        .page-preview {
            flex: 0 0 auto;
            height: 100px;
            border-radius: 8px;
            overflow: visible;
            box-shadow: 0 6px 18px rgba(11,61,46,0.08);
            padding: 4px; /* thicker frame */
            position: relative;
        }

        /* small "browser chrome" bar on top of preview */
        .page-preview::before {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            height: 22px;
            z-index: 1;
        }

        .page-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            border-radius: 4px;
            border: 4px solid var(--festive-red);
            box-sizing: border-box;
        }

        .fact-content {
            flex: 1 1 auto;
            min-width: 0; /* allow truncation */
        }

        .fact-content h3 {
            margin: 0 0 6px;
        }

        .fact-content p {
            margin: 6px 0;
        }

        /* small linked image grid under interactive text */
        .grid-title {
            text-align: center;
            font-size: 0.85rem;
            color: var(--pine-green);
            font-weight: 700;
            margin-top: 14px;
            margin-bottom: 8px;
        }

        .resource-grid {
            width: 100%;
            display: flex;
            gap: 12px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            padding: 10px 12px 18px;
            box-sizing: border-box;
        }

        .resource-item a {
            display: inline-block;
            width: 80px;
            height: auto;
            overflow: hidden;
            border-radius: 6px;
            border: 2px solid rgba(11,61,46,0.06);
            box-shadow: 0 3px 8px rgba(11,61,46,0.06);
        }

        .resource-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        @media (max-width: 520px) {
            .fact-message {
                flex-direction: column;
                align-items: stretch;
            }
            .page-preview {
                width: 100%;
                height: 160px;
                flex: none;
            }
        }

        .unacceptable-message {
            /* allow background to show through slightly */
            background-color: rgba(255,244,244,0.5); /* was var(--light-red) */
            color: var(--festive-red);
        }
        .countdown {
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 10px;
            color: var(--warm-gold);
        }
        .footer {
            background-color: var(--cream-bg);
            color: var(--pine-green);
            padding: 20px;
            text-align: center;
            font-size: 0.9rem;
        }
        .footer a {
            color: var(--pine-green);
            text-decoration: none;
            font-weight: 700;
        }
        @media (max-width: 600px) {
            .options {
                flex-direction: column;
                align-items: center;
            }
            .option-btn {
                width: 80%;
            }
            .banner h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Fixed overlay used to emulate a non-repeating, viewport-locked background
         for the interactive section. Created/removed by JS when the CTA is clicked. -->
    <div id="interactiveBgOverlay" style="display:none; pointer-events:none; position:fixed; z-index:0;
        left:0; top:0; width:100%; height:100%; background-repeat:no-repeat; background-position:center center; background-size:cover;">
    </div>

    <!-- Background video (MOV). Note: some browsers may not support .mov ‚Äî consider providing an MP4/WebM fallback for wide compatibility. -->
    <video id="backgroundVideo" class="background-video" autoplay muted loop playsinline>
        <source src="https://ik.imagekit.io/eydsmhc4x/natal/AdobeStock_1839912194.mov" type="video/quicktime">
        <!-- If you convert to mp4 use: type="video/mp4" and include an mp4 <source> here as fallback. -->
    </video>

    <div class="email-container">
        <div class="header">
            <h2>GABINETE DE INTELIG√äNCIA TERRITORIAL</h2>
        </div>
        
        <div class="banner-container">
            <div class="banner">
                <img class="banner-img" src="https://ik.imagekit.io/eydsmhc4x/natal/E%20um%20pr%C3%B3spero%20Ano%20Novo%20(1).png" alt="Banner">
                <div class="banner-content">
                    <p></p>
                    <h1><b></b></h1>
                    <p></p>
                    <button class="click-here" onclick="showInteractiveSection()">Oeiras √† dist√¢ncia de um clique</button>
                </div>
            </div>
        </div>

        <div class="interactive-section" id="interactiveSection" style="display:none; text-align: center; padding: 20px;">
            <br>
            <br>
            <br>
            <div class="question">
                Este Natal o maior presente √© um mundo mais <b>justo</b> e <b>sustent√°vel</b> para todos.
            </div>
            <br>
            <p style="color: var(--pine-green); font-size: 1.0em; max-width: 500px; margin: 15px auto; line-height: 1.5;">
                No GIT, criamos <b>intelig√™ncia territorial</b>. <p>No <a href="https://oeirasinterativa.oeiras.pt/#/portal/home"></a><b>Oeiras Interativa</b></a> partilhamo-la com o mundo.</p>
            </p>
            <br>
            <h3 style="color: var(--muted-text); font-size: 1.0em;">J√° conhece o Oeiras Interativa?</h3>

            <div class="options">
                <button class="option-btn yes-btn" onclick="showFact()">Sim!</button>
                <button class="option-btn no-btn" onclick="showUnacceptable()">Quero conhecer!</button>
            </div>
        </div>
        
        <div class="footer">
            <p><b>¬© 2025 GIT.</b> Todos os direitos reservados.</p>
            <p><a href="https://oeirasinterativa.oeiras.pt/">Visite o Oeiras Interativa</a>     |     <a href="mailto:git@oeiras.pt">Tem d√∫vidas? Contacte-nos</a></p>
        </div>
    </div>

    <script>
        function showInteractiveSection() {
            const interactive = document.getElementById('interactiveSection');
            if (!interactive) return;

            // reveal interactive area immediately
            interactive.style.display = 'block';

            // animate banner out, then remove from DOM when transition finishes
            const bannerContainer = document.querySelector('.banner-container');
            if (bannerContainer) {
                // ensure reflow so transition runs if class added immediately
                // eslint-disable-next-line no-unused-expressions
                bannerContainer.offsetHeight;
                bannerContainer.classList.add('fade-out');

                const cleanup = () => {
                    bannerContainer.removeEventListener('transitionend', cleanup);
                    if (bannerContainer.parentNode) bannerContainer.parentNode.removeChild(bannerContainer);
                };

                bannerContainer.addEventListener('transitionend', cleanup);

                // fallback: remove after 600ms in case transitionend doesn't fire
                setTimeout(() => {
                    if (document.body.contains(bannerContainer)) {
                        try { cleanup(); } catch (e) { /* ignore */ }
                    }
                }, 600);
            }

            // Rolar suavemente para a se√ß√£o interativa
            interactive.scrollIntoView({ behavior: 'smooth' });
        }
        
        function showFact() {
            // remove any existing unacceptable message
            const existingUnacceptable = document.getElementById('unacceptableMessage');
            if (existingUnacceptable) existingUnacceptable.remove();

            // if fact message already exists, keep it; otherwise create it
            let fact = document.getElementById('factMessage');
            if (!fact) {
                fact = document.createElement('div');
                fact.className = 'message fact-message';
                fact.id = 'factMessage';
                fact.innerHTML = `
                    <div class="fact-content">
                        <h3>Ficamos felizes por saber!</h3>
                        <br>
                        <p>Em 2025, o GIT trabalhou para tornar o Oeiras Interativa mais r√°pido, intuitivo e acess√≠vel a todos. Que o novo ano traga ainda mais colabora√ß√£o e inova√ß√£o para o nosso territ√≥rio.</p> <br><p><h2>Boas Festas!</h2></p>
                        <p></p>
                    </div>
                    
                <!-- Small linked image grid (6 items) -->
                <div class="grid-title">Explore os recursos</div>
                <div class="resource-grid" aria-label="Recursos">
                    <div class="resource-item"><a href="https://oeirasinterativa.oeiras.pt/#/ig/home" target="_blank" rel="noopener noreferrer" title="Geoportal"><img src="https://ik.imagekit.io/eydsmhc4x/natal/Captura%20de%20ecr%C3%A3%202025-12-18%20162855.png" alt="Geoportal"></a></div>
                    <div class="resource-item"><a href="https://oeirasinterativa.oeiras.pt/dadosabertos/" target="_blank" rel="noopener noreferrer" title="Dados abertos"><img src="https://ik.imagekit.io/eydsmhc4x/natal/Captura%20de%20ecr%C3%A3%202025-12-18%20162904.png" alt="Dados abertos"></a></div>
                    <div class="resource-item"><a href="https://oeirasinterativa.oeiras.pt/#/epl/home" target="_blank" rel="noopener noreferrer" title="Plantas de localiza√ß√£o"><img src="https://ik.imagekit.io/eydsmhc4x/natal/Captura%20de%20ecr%C3%A3%202025-12-18%20162911.png" alt="Plantas de localiza√ß√£o"></a></div>
                    <div class="resource-item"><a href="https://oeirasinterativa.oeiras.pt/#/os/home" target="_blank" rel="noopener noreferrer" title="Observat√≥rio"><img src="https://ik.imagekit.io/eydsmhc4x/natal/Captura%20de%20ecr%C3%A3%202025-12-18%20162917.png" alt="Observat√≥rio"></a></div>
                    <div class="resource-item"><a href="https://oeirasinterativa.oeiras.pt/#/meubairro/home" target="_blank" rel="noopener noreferrer" title="O meu bairro"><img src="https://ik.imagekit.io/eydsmhc4x/natal/Captura%20de%20ecr%C3%A3%202025-12-18%20162859.png" alt="O meu bairro"></a></div>
                </div>
                `;
                document.getElementById('interactiveSection').appendChild(fact);
            }

            // ensure it's visible and scroll to it
            fact.style.display = 'block';
            fact.scrollIntoView({ behavior: 'smooth' });
        }
        
        function showUnacceptable() {
            // remove any existing fact message
            const existingFact = document.getElementById('factMessage');
            if (existingFact) existingFact.remove();

            // create unacceptable message if needed
            let un = document.getElementById('unacceptableMessage');
            if (!un) {
                un = document.createElement('div');
                un.className = 'message unacceptable-message';
                un.id = 'unacceptableMessage';
                un.innerHTML = `
                    <h3>O futuro de Oeiras passa por cada um de n√≥s.</h3>
                    <p></p>
                    <p>O Oeiras Interativa n√£o √© apenas um portal; √© a sua voz na gest√£o municipal. √â nesta plataforma que pode reportar ocorr√™ncias, acompanhar projetos e decidir o futuro do munic√≠pio.</p>
                    <p><b>O seu registo √© o primeiro passo para fazer a diferen√ßa. </b></p>
                    <p>A redirecionar em <b><span id="countdown">10</span></b> segundos...</p>
                `;
                document.getElementById('interactiveSection').appendChild(un);
            }

            // show it and start countdown
            un.style.display = 'block';
            let seconds = 10;
            const countdownElement = un.querySelector('#countdown');

            const countdownInterval = setInterval(function() {
                seconds--;
                if (countdownElement) countdownElement.textContent = seconds;

                if (seconds <= 0) {
                    clearInterval(countdownInterval);
                    const url = 'https://oeirasinterativa.oeiras.pt/#/portal/auth/register';
                    window.open(url, '_blank', 'noopener,noreferrer');
                }
            }, 1000);

            // Scroll to the message
            un.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Para compatibilidade com clientes de email que n√£o suportam JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Adicionar fallback para o bot√£o "Clique Aqui"
            const clickHereBtn = document.querySelector('.click-here');
            if(clickHereBtn) clickHereBtn.setAttribute('onclick', 'showInteractiveSection()');
            
            // Adicionar links de fallback para os bot√µes Sim/N√£o
            const yesBtn = document.querySelector('.yes-btn');
            const noBtn = document.querySelector('.no-btn');
            if(yesBtn) yesBtn.setAttribute('onclick', 'showFact()');
            if(noBtn) noBtn.setAttribute('onclick', 'showUnacceptable()');
            
            // Adicionar fallback para navegadores mais antigos
            if (!document.addEventListener) {
                alert("Esta experi√™ncia interativa requer um navegador moderno. Visite oeirasinterativa.pt para se inscrever!");
            }
        });
    </script>
</body>
</html>